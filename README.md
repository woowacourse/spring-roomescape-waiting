# **방탈출 예약 시스템**

## **✅ 예외 처리**

- 전역 예외 처리 후 **HTTP 상태코드** 반환
    - 404 Not Found / 403 Forbidden 등 상황에 맞는 응답 제공
- 예약 예외:
    - 시간, 날짜, 예약자명: **null / blank 불가**
    - 예약 일시는 **현재 시각 이후**여야 함
- 시간 예외:
    - 중복된 시간 등록 방지
    - **이미 예약된 시간 삭제 불가**

## **📅 예약 기능**

- 예약 생성
    - 시간 + 날짜 기준 중복 예약 불가
    - 로그인한 사용자 정보와 함께 예약 생성
    - 관리자는 **회원 선택 후 예약** 가능
- 예약 조회
    - 날짜 + 테마 기준으로 시간별 예약 가능 여부 확인
    - /reservations API에 **theme 관련 필드 포함**
- 사용자별 예약 목록 조회
- 예약자/테마/날짜 기준 **예약 검색 기능 (관리자 전용)**
- 내 예약 목록 조회
    - 사용자의 예약 목록을 조회할 수 있다

---

## **🎨 테마 기능**

- 테마 엔티티 추가 및 연동
    - Reservation과 테마 연결
- 테마 API:
    - 테마 조회
    - 테마 추가
    - 테마 삭제 (단, 예약 있는 경우 불가)
- 인기 테마 조회
    - **최근 7일간 예약 많은 상위 10개 테마**
    - / 요청 시 인기 테마 리스트 포함된 index.html 반환

---

## **👤 사용자 기능**

- 사용자 정보
    - name, email, password, role(ADMIN/USER)
        - name은 25자 이하여야한다.
        - password 20자 이하여야한다.
- 회원 가입 및 인증
- 로그인:
    - /login GET → 로그인 폼 (login.html)
    - /login POST → email/password로 로그인
    - 로그인 성공 시 **Cookie에 JWT 토큰(token)** 포함

---

## **🔐 인증/인가**

- 로그인 후 사용자의 예약 생성 기능 사용 가능
- 인증 정보 처리:
    - Cookie의 token을 이용해 사용자 정보 추출
- 어드민 접근 제한:
    - /admin/** 경로는 **ADMIN Role**만 접근 가능

---

## 실행 환경

1. 터미널에서 /docker 디렉토리로 이동합니다.
2. 다음 명령어를 통해 MySQL 컨테이너를 실행합니다.
   ```bash
   docker compose up -d
    ```

- data.sql 파일로 초기 데이터를 세팅합니다.
    - 계정 정보
        - 유저 계정
            - email: user1@email.com, password: 1234
            - user: user2@email.com, password: 1234
        - 어드민 계정
            - email: admin@email.com, password: 1234 
